{% extends 'base.html' %}
{% block title %}Paiement - {{ reservation.reference }}{% endblock %}

{% block content %}
<div class="paiement-modern-container">
    <div class="paiement-modern-card">
        <div class="paiement-modern-header">
            <i class="fas fa-credit-card"></i>
            <h2>Paiement de la réservation</h2>
        </div>
        <div class="paiement-modern-recap">
            <h3><i class="fas fa-receipt"></i> Récapitulatif</h3>
            <div class="paiement-modern-recap-grid">
                <div class="recap-item"><span><i class="fas fa-hashtag"></i> Référence</span><strong>{{ reservation.reference }}</strong></div>
                <div class="recap-item"><span><i class="fas fa-calendar-alt"></i> Date voyage</span><strong>{{ reservation.date_voyage|date:'l d F Y' }}</strong></div>
                <div class="recap-item"><span><i class="fas fa-route"></i> Trajet</span><strong>{{ reservation.depart.trip.arret_depart.ville.nom }} → {{ reservation.depart.trip.arret_arrivee.ville.nom }}</strong></div>
                <div class="recap-item"><span><i class="fas fa-clock"></i> Départ</span><strong>{{ reservation.heure_depart|time:'H:i' }} → {{ reservation.heure_arrivee|time:'H:i' }}</strong></div>
                <div class="recap-item"><span><i class="fas fa-users"></i> Places</span><strong>{{ reservation.nombre_places }}</strong></div>
                <div class="recap-item recap-total"><span><i class="fas fa-calculator"></i> Total</span><strong>{{ reservation.prix_total }} FCFA</strong></div>
            </div>
        </div>
        <div class="paiement-modern-actions">
            <form method="POST" action="{% url 'reservations:traiter_paiement' reservation.id %}">
                {% csrf_token %}
                <input type="hidden" name="action" value="payer">
                <button type="submit" class="btn btn-primary paiement-modern-btn">
                    <i class="fas fa-check-circle"></i> Payer {{ reservation.prix_total }} FCFA
                </button>
            </form>
            <a href="{% url 'reservations:annuler' reservation.id %}" class="btn btn-outline paiement-modern-btn paiement-modern-btn-cancel">
                <i class="fas fa-times"></i> Annuler la réservation
            </a>
        </div>
    </div>
</div>
{% endblock %}
