{% extends 'base.html' %}
{% block title %}Mes rÃ©servations - GareCI{% endblock %}

{% block content %}
<div class="reservations-container">
  <h1>ğŸ“‹ Mes rÃ©servations</h1>
  <div class="reservation-filters">
    <a href="{% url 'mes_reservations' %}" class="filter-link">Toutes</a>
    <a href="{% url 'mes_reservations' %}?statut=EN_ATTENTE" class="filter-link">En attente</a>
    <a href="{% url 'mes_reservations' %}?statut=CONFIRMEE" class="filter-link">ConfirmÃ©es</a>
    <a href="{% url 'mes_reservations' %}?statut=ANNULEE" class="filter-link">AnnulÃ©es</a>
  </div>
  {% for reservation in reservations %}
  <div class="reservation-card">
    <div>RÃ©f : {{ reservation.reference }} {% if reservation.statut == 'CONFIRMEE' %}âœ… ConfirmÃ©e{% elif reservation.statut == 'EN_ATTENTE' %}â³ En attente{% elif reservation.statut == 'ANNULEE' %}<span class="badge badge-gris">AnnulÃ©e</span>{% endif %}</div>
    <div>ğŸ“… {{ reservation.date_voyage|date:'l d F Y' }} Ã  {{ reservation.heure_depart|time:'H:i' }}</div>
    <div>{{ reservation.depart.trip.arret_depart.ville.nom }} â†’ {{ reservation.depart.trip.arret_arrivee.ville.nom }} â€” {{ reservation.nombre_places }} places â€” {{ reservation.prix_total }} FCFA</div>
    <div class="reservation-actions">
      {% if reservation.statut == 'EN_ATTENTE' %}
        <a href="{% url 'reservations:paiement' reservation.id %}" class="btn">ğŸ’³ Payer maintenant</a>
        <a href="{% url 'reservations:annuler' reservation.id %}" class="btn">âŒ Annuler</a>
      {% elif reservation.statut == 'CONFIRMEE' %}
        <a href="{% url 'reservations:telecharger_billet' reservation.id %}" class="btn">ğŸ“„ TÃ©lÃ©charger mon billet</a>
        <a href="{% url 'reservations:annuler' reservation.id %}" class="btn">âŒ Annuler</a>
      {% elif reservation.statut == 'ANNULEE' %}
        <span class="badge badge-gris">AnnulÃ©e</span>
      {% endif %}
    </div>
  </div>
  {% empty %}
  <div class="empty-state">Aucune rÃ©servation pour le moment.</div>
  {% endfor %}
</div>
{% endblock %}
